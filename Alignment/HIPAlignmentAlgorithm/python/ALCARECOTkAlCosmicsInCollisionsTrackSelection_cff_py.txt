import Alignment.CommonAlignment.tools.trackselectionRefitting as TrackRefitterSequencer

decoMode = ("deco" in strflaglower)
isZeroTesla = ("0T" in strflaglower)
useCosTrSpl = ("TrSpl" in strflaglower)

process.TrackRefitterSequence = TrackRefitterSequencer.getSequence(
  process,
  "ALCARECOTkAlCosmicsInCollisions",
  TTRHBuilder = "WithAngleAndTemplate",
  usePixelQualityFlag = None, # Keep default behavior ("WithAngleAndTemplate" -> True, "WithTrackAngle" -> False)
  openMassWindow = False,
  cosmicsDecoMode = decoMode,
  cosmicsZeroTesla = isZeroTesla,
  momentumConstraint = None, # Should be a momentum constraint object
  cosmicTrackSplitting = useCosTrSpl,
  use_d0cut = True
  )
