import Alignment.CommonAlignment.tools.trackselectionRefitting as TrackRefitterSequencer

decoMode = ("deco" in strflagoptslower)
isZeroTesla = ("0t" in strflagoptslower or "zerotesla" in strflagoptslower)
useCosTrSpl = ("trspl" in strflagoptslower or "tracksplitting" in strflagoptslower)

process.TrackRefitterSequence = TrackRefitterSequencer.getSequence(
  process,
  "ALCARECOTkAlCosmicsInCollisions",
  TTRHBuilder = strTTRHBuilder,
  usePixelQualityFlag = None, # Keep default behavior ("WithAngleAndTemplate" -> True, "WithTrackAngle" -> False)
  openMassWindow = False,
  cosmicsDecoMode = decoMode,
  cosmicsZeroTesla = isZeroTesla,
  momentumConstraint = None, # Should be a momentum constraint object
  cosmicTrackSplitting = useCosTrSpl,
  use_d0cut = True
  )
